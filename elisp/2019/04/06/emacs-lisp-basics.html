<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Emacs lisp basics | Infinite strange loop</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Emacs lisp basics" />
<meta name="author" content="Valerii Lysenko" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Defining variables" />
<meta property="og:description" content="Defining variables" />
<link rel="canonical" href="/elisp/2019/04/06/emacs-lisp-basics.html" />
<meta property="og:url" content="/elisp/2019/04/06/emacs-lisp-basics.html" />
<meta property="og:site_name" content="Infinite strange loop" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-06T13:05:12-05:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Valerii Lysenko"},"mainEntityOfPage":{"@type":"WebPage","@id":"/elisp/2019/04/06/emacs-lisp-basics.html"},"description":"Defining variables","@type":"BlogPosting","url":"/elisp/2019/04/06/emacs-lisp-basics.html","headline":"Emacs lisp basics","dateModified":"2019-04-06T13:05:12-05:00","datePublished":"2019-04-06T13:05:12-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Infinite strange loop" /><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-142469594-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Infinite strange loop</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Emacs lisp basics</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-06T13:05:12-05:00" itemprop="datePublished">Apr 6, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h3 id="defining-variables">Defining variables</h3>

<p>Scope variables:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">x</span> <span class="mi">1</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">y</span> <span class="mi">2</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">z</span> <span class="mi">3</span><span class="p">))</span>
  <span class="o">....</span><span class="p">)</span></code></pre></figure>

<p>Scoped variable with possibility to refer previous variables:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">let*</span> <span class="p">((</span><span class="nv">x</span> <span class="mi">1</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">y</span> <span class="nv">x</span><span class="p">))</span>
   <span class="o">....</span><span class="p">)</span></code></pre></figure>

<p>Global scoped variables:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">setq</span> <span class="nv">user-name</span> <span class="s">"Dummy"</span><span class="p">)</span></code></pre></figure>

<p>Global scoped variables which will result in ceation of local modified copy after change:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">setq-default</span> <span class="nv">user-name</span> <span class="s">"Dummy"</span><span class="p">)</span></code></pre></figure>

<p>Buffer local variables:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">setq-local</span> <span class="nv">user-name</span> <span class="s">"Dummy"</span><span class="p">)</span></code></pre></figure>

<h3 id="defining-functions">Defining functions</h3>

<p>Definition (defun is a macro):</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="nb">defun</span> <span class="nv">name</span> <span class="nv">args</span> <span class="nv">[doc]</span> <span class="nv">[declare]</span> <span class="nv">[interactive]</span> <span class="nv">body...</span></code></pre></figure>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">foo</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
  <span class="s">"Some documentation."</span>
  <span class="o">...</span><span class="p">)</span></code></pre></figure>

<p>Interactive function (which can be executed in M-x: from emacs):</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">defun</span> <span class="nv">foo</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
  <span class="s">"Some documentation."</span>
  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
  <span class="o">...</span><span class="p">)</span></code></pre></figure>

<p>Documentation regarding interactive <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html">using-interactive-docs</a></p>

<p>Define inline function (define-inline is a macro):</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="nv">define-inline</span> <span class="nv">name</span> <span class="nv">args</span> <span class="nv">[doc]</span> <span class="nv">[declare]</span> <span class="nv">body...</span></code></pre></figure>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">define-inline</span> <span class="nv">foo</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span>
  <span class="s">"Some documentation."</span>
  <span class="o">...</span><span class="p">)</span></code></pre></figure>

<p>Lambda function definition:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">arg-variables...</span><span class="p">)</span>
       <span class="nv">[documentation-string]</span>
       <span class="nv">[interactive-declaration]</span>
       <span class="nv">body-forms...</span><span class="p">)</span></code></pre></figure>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
  <span class="s">"Return sum of `A' and `B'."</span>
  <span class="p">(</span><span class="nb">+</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span></code></pre></figure>

<p>Call lambda function:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">funcall</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">))</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span></code></pre></figure>

<h3 id="conditionals">Conditionals</h3>

<p>Special form: If then else</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="k">if</span> <span class="kt">condition</span> <span class="nv">then-form</span> <span class="nv">else-form</span></code></pre></figure>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">if</span> <span class="no">nil</span>
    <span class="p">(</span><span class="nb">print</span> <span class="s">"true"</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">print</span> <span class="s">"false"</span><span class="p">))</span></code></pre></figure>

<p>Macro: when condition then-forms</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">when</span> <span class="kt">condition</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span></code></pre></figure>

<p>Equivalent to:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">if</span> <span class="kt">condition</span> <span class="p">(</span><span class="k">progn</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="no">nil</span><span class="p">)</span></code></pre></figure>

<p>Macro: unless condition forms</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">unless</span> <span class="kt">condition</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span></code></pre></figure>

<p>Equivalent to:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="k">if</span> <span class="kt">condition</span> <span class="no">nil</span> <span class="p">(</span><span class="k">progn</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">))</span></code></pre></figure>

<p>Special form: cond clause</p>

<p>Clause looks following: (condition body-forms…) or (condition)</p>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nb">numberp</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
      <span class="p">((</span><span class="nb">stringp</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">x</span><span class="p">)</span>
      <span class="p">((</span><span class="nv">bufferp</span> <span class="nv">x</span><span class="p">)</span>
        <span class="p">(</span><span class="k">setq</span> <span class="nv">temporary-hack</span> <span class="nv">x</span><span class="p">)</span> <span class="c1">; multiple body-forms</span>
        <span class="p">(</span><span class="nv">buffer-name</span> <span class="nv">x</span><span class="p">))</span>        <span class="c1">; in one clause</span>
      <span class="p">((</span><span class="nb">symbolp</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">symbol-value</span> <span class="nv">x</span><span class="p">)))</span></code></pre></figure>

<p>Macro: pcase expression &amp;rest clauses</p>

<p>Example:</p>

<figure class="highlight"><pre><code class="language-elisp" data-lang="elisp"><span class="p">(</span><span class="nv">pcase</span> <span class="p">(</span><span class="nv">get-return-code</span> <span class="nv">x</span><span class="p">)</span>
  <span class="p">(</span><span class="ss">'success</span>       <span class="p">(</span><span class="nv">message</span> <span class="s">"Done!"</span><span class="p">))</span>
  <span class="p">(</span><span class="ss">'would-block</span>   <span class="p">(</span><span class="nv">message</span> <span class="s">"Sorry, can't do it now"</span><span class="p">))</span>
  <span class="p">(</span><span class="ss">'read-only</span>     <span class="p">(</span><span class="nv">message</span> <span class="s">"The shmliblick is read-only"</span><span class="p">))</span>
  <span class="p">(</span><span class="ss">'access-denied</span> <span class="p">(</span><span class="nv">message</span> <span class="s">"You do not have the needed rights"</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">code</span>           <span class="p">(</span><span class="nv">message</span> <span class="s">"Unknown return code %S"</span> <span class="nv">code</span><span class="p">)))</span></code></pre></figure>


  </div><a class="u-url" href="/elisp/2019/04/06/emacs-lisp-basics.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Infinite strange loop</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Valerii Lysenko</li><li><a class="u-email" href="mailto:vallyscode@gmail.com">vallyscode@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/vallyscode"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">vallyscode</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Just a notes that are either usefull or just interesting.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
